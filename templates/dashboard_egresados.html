<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Panel de Administraci贸n</title>

<link rel="icon" href="/static/img/favicon.ico" type="Image/x-icon">
<link rel="stylesheet" href="/static/css/dashboard_egresados.css" />

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">

        <a class="navbar-brand" href="#">
            <img src="/static/img/umb.png" alt="Logo" width="160" height="55" style="object-fit: cover;">
        </a>

        <button class="btn btn-outline-light ms-auto" onclick="toggleMenu()">
            <i class="bi bi-list" style="font-size:1.5rem;"></i>
        </button>

    </div>
</nav>

<!-- PANEL DESPLEGABLE -->
<div id="menuPanel" class="panel-menu">

    <div class="text-center p-3 border-bottom">
        <strong>Acciones</strong>
    </div>

    <div class="list-group list-group-flush">

        <a href="/egresados" class="list-group-item text-decoration-none text-dark">
            Egresados
        </a>


        <!-- BOTN QUE ABRE LOGIN2 -->
        <button class="list-group-item"
                data-bs-toggle="modal"
                data-bs-target="#login2Modal">
            Agregar administrador
        </button>

        <button class="list-group-item text-danger d-flex align-items-center gap-2"
                onclick="confirmarLogout()">
            <i class="bi bi-box-arrow-right"></i>
            Cerrar sesi贸n
        </button>

    </div>
</div>

<!-- ENCABEZADO -->
<header class="header text-center p-4">
    <h1>
        Bienvenid@, {{ nombre_admin }}
    </h1>
</header>

<!-- CONTENIDO -->
<main class="container text-center mt-4">
    <img src="/static/img/fondo.png" alt="Imagen principal" class="main-image">
</main>

<!-- FOOTER -->
<footer class="footer text-center p-3 bg-dark text-white">
    <p>漏 2025 UMB San Jos茅 del Rinc贸n</p>
</footer>


<!-- ======================= -->
<!--   MODAL LOGIN2          -->
<!-- ======================= -->
<div class="modal fade" id="login2Modal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content p-3">

            <div class="modal-header">
                <h5 class="modal-title">Solo personal autorizado</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <form action="/login2" method="POST">

                <div class="modal-body">

                    <label class="form-label">Usuario</label>
                    <input type="email" class="form-control" name="correo"
                        placeholder="Agrega el correo electr贸nico" required>

                    <label class="form-label mt-3">Contrase帽a</label>

                    <div class="input-group">
                        <input type="password" class="form-control"
                            name="password" id="passwordInput2"
                            placeholder="********" required>

                        <span class="input-group-text" id="togglePassword2">
                            <i class="bi bi-eye" id="iconEye2"></i>
                        </span>
                    </div>

                    {% if error2 %}
                    <p class="text-danger text-center mt-2">{{ error2 }}</p>
                    {% endif %}

                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-dark w-100">Acceder</button>
                </div>

            </form>
        </div>
    </div>
</div>


<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


<script>
function toggleMenu(){
    document.getElementById("menuPanel").classList.toggle("show");
}

function confirmarLogout(){
    const salir = confirm("驴Seguro que deseas cerrar sesi贸n?");
    if(salir){
        window.location.href = "/logout";
    }
}
</script>

<!-- Mostrar / Ocultar contrase帽a -->
<script>
document.getElementById("togglePassword2").addEventListener("click", function () {
    const pwd = document.getElementById("passwordInput2");
    const icon = document.getElementById("iconEye2");

    if (pwd.type === "password") {
        pwd.type = "text";
        icon.classList.remove("bi-eye");
        icon.classList.add("bi-eye-slash");
    } else {
        pwd.type = "password";
        icon.classList.remove("bi-eye-slash");
        icon.classList.add("bi-eye");
    }
});
</script>

<!--  ABRIR MODAL LOGIN2 SI HAY ERROR -->
{% if abrir_modal2 %}
<script>
    var modalAdmin = new bootstrap.Modal(document.getElementById('login2Modal'));
    modalAdmin.show();
</script>
{% endif %}


<script>
const login2Modal = document.getElementById("login2Modal");

login2Modal.addEventListener("hidden.bs.modal", function () {

    // limpiar inputs
    login2Modal.querySelector('input[name="correo"]').value = "";
    login2Modal.querySelector('input[name="password"]').value = "";

    // ocultar mensaje de error si existe
    const errorMsg = login2Modal.querySelector(".text-danger");
    if(errorMsg){
        errorMsg.remove();
    }
});
</script>

</body>
</html>
